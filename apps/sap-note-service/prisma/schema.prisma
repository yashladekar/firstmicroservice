// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model SapNote {
  id           String   @id @default(uuid())

  noteNumber   String   @unique
  title        String? 
  priority     String?
  cvssScore    Float?
  cvssVector   String?

  confidence   Int
  correction   String?

  rawText      String
  createdAt    DateTime @default(now())

  components   SapNoteComponent[]
}

model SapNoteComponent {
  id          String   @id @default(uuid())

  noteId      String
  note        SapNote  @relation(fields: [noteId], references: [id], onDelete: Cascade)

  component   String
  fromVersion String?
  toVersion   String?

  @@unique([noteId, component])
}
